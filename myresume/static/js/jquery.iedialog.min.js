(function(a){a.fn.extend({ieDialog:function(c){var b={dialog_title:"This browser is out of date, please upgrade",dialog_description:"To get the best possible experience using our site we recommend that you upgrade to a modern browser.",browsers:[{browser_title:"Chrome",browser_image:"images/chrome.png",browser_link:"http://www.google.com/chrome/",recommended:true},{browser_title:"Firefox",browser_image:"images/firefox.png",browser_link:"http://www.mozilla.org/en-US/firefox/new/",recommended:true},{browser_title:"Safari",browser_image:"images/safari.png",browser_link:"http://support.apple.com/downloads/#safari",recommended:false},{browser_title:"Internet Explorer 10",browser_image:"images/ie10.png",browser_link:"http://www.microsoft.com/InternetExplorer",recommended:false}],closable:true,show_again_after:0,supported_version:9,close_btn_template:'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&#215;</button>',recommend_template:'<div class="recommended">(recommended)</div>',browser_template:'<div class="browser" style="{STYLE}"><a href="{BROWSER_LINK}" target="_blank"><img src="{BROWSER_IMAGE}" alt="{BROWSER_ALT_TITLE}" /><div class="browser-title">{BROWSER_TITLE}</div>{RECOMMENDED_TEMPLATE}</a></div>',dialog_template:'<div id="ie-dialog" class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header">{DIALOG_CLOSE_BUTTON}<h4 id="ie-dialog-label" class="modal-title">Modal title</h4></div><div class="modal-body"><p class="ie-dialog-description">{DIALOG_DESCRIPTION}</p><div class="browser_list">{BROWSERS_TEMPLATE}</div></div><div class="modal-footer"></div></div></div></div>'};var d=a.extend(b,c);return this.each(function(){var l=this;a(window).bind("resize",function(){e()});function h(){var s=g();var r=(d.show_again_after>0)?i("ie-dialog-closed"):"";if(s.browser=="Explorer"&&s.version<d.supported_version&&r!="closed"){var q=f(d.browsers);var p=k(q);a("body").append(a(p));if(typeof(a.fn.modal)==="function"){a("#ie-dialog").modal("show")}else{a("body").append(a('<div class="modal-backdrop in"></div>'));a("#ie-dialog").show();a(".modal-backdrop").show()}a("[data-dismiss=modal]").off("click");a("[data-dismiss=modal]").on("click",function(){a("#ie-dialog").remove();a(".modal-backdrop").remove();if(d.show_again_after>0){m("ie-dialog-closed","closed",d.show_again_after)}else{}})}}function e(){a(".modal:visible").removeClass("mobile");if(a(window).width()>=1200){a(".modal:visible").css({width:650,marginLeft:-325})}else{if(a(window).width()<1200&&a(window).width()>=979){a(".modal:visible").css({width:560,marginLeft:-280})}else{if(a(window).width()<979&&a(window).width()>=767){a(".modal:visible").css({width:480,marginLeft:-240})}else{if(a(window).width()<767&&a(window).width()>=480){a(".modal:visible").css({width:320,marginLeft:-160});a(".modal:visible").addClass("mobile")}else{if(a(window).width()<480){a(".modal:visible").css({width:280,marginLeft:-140});a(".modal:visible").addClass("mobile")}}}}}}function k(q){var p=d.dialog_template;p=p.replace("{DIALOG_CLOSE_BUTTON}",(d.closable==false)?"":d.close_btn_template);p=p.replace("{DIALOG_TITLE}",d.dialog_title);p=p.replace("{DIALOG_DESCRIPTION}",d.dialog_description);p=p.replace("{BROWSERS_TEMPLATE}",q);return p}function f(q){if(q.length<=0){throw new Error("Browser list is empty, need to contain at least 1 browser.");return false}if(q.length>6){throw new Error("Browser list may contain up to 6 browsers.");return false}var r="";var p=Math.floor(99/q.length);a.each(q,function(t,s){r+=j(s,p)});r+='<div style="clear: both;"></div>';return r}function j(p,r){var q=d.browser_template;q=q.replace("{STYLE}","float: left; width: "+r.toFixed(2)+"%; text-align: center;");q=q.replace("{BROWSER_ALT_TITLE}",p.browser_title);q=q.replace("{BROWSER_TITLE}",p.browser_title);q=q.replace("{BROWSER_IMAGE}",p.browser_image);q=q.replace("{BROWSER_LINK}",p.browser_link);q=q.replace("{RECOMMENDED_TEMPLATE}",(p.recommended==true)?d.recommend_template:"");return q}function m(s,t,r){var p="";if(r){var q=new Date();q.setTime(q.getTime()+(r*24*3600*1000));var p="; expires="+q.toGMTString()}document.cookie=s+"="+t+p+"; path=/"}function i(p){if(document.cookie.length>0){lnStart=document.cookie.indexOf(p+"=");if(lnStart!=-1){lnStart=lnStart+p.length+1;lnEnd=document.cookie.indexOf(";",lnStart);if(lnEnd==-1){lnEnd=document.cookie.length}return unescape(document.cookie.substring(lnStart,lnEnd))}}return""}function g(){var p=[{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"}];return{browser:o(p)||"Modern Browser",version:n(navigator.userAgent)||n(navigator.appVersion)||"0.0"}}function o(s){for(var p=0;p<s.length;p++){var q=s[p].string;var r=s[p].prop;this.versionSearchString=s[p].versionSearch||s[p].identity;if(q){if(q.indexOf(s[p].subString)!=-1){return s[p].identity}}else{if(r){return s[p].identity}}}}function n(q){var p=q.indexOf(this.versionSearchString);if(p==-1){return}return parseFloat(q.substring(p+this.versionSearchString.length+1))}h();e()})}})})(jQuery);